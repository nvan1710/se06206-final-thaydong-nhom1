{"ast":null,"code":"const isValidMove = (piece, fromRow, fromCol, toRow, toCol, board, isWhiteTurn) => {\n  if (!piece) return false;\n  if (fromRow === toRow && fromCol === toCol) return false; // Không di chuyển đến vị trí hiện tại\n\n  // ✅ **Xác định quân trắng hay đen**\n  const isWhite = [\"♙\", \"♖\", \"♘\", \"♗\", \"♕\", \"♔\"].includes(piece);\n  const isBlack = !isWhite; // Không cần khai báo thêm biến mới\n  // ✅ **Kiểm tra đúng lượt chơi**\n  if (isWhite && !isWhiteTurn || !isWhite && isWhiteTurn) return false;\n  const targetPiece = board[toRow][toCol];\n\n  // ✅ **Kiểm tra có ăn quân cùng màu không**\n  if (targetPiece && [\"♙\", \"♖\", \"♘\", \"♗\", \"♕\", \"♔\", \"♟\", \"♜\", \"♞\", \"♝\", \"♛\", \"♚\"].includes(targetPiece) === isWhite) return false;\n  switch (piece) {\n    case \"♙\":\n      return isValidPawnMove(fromRow, fromCol, toRow, toCol, board, true);\n    case \"♟\":\n      return isValidPawnMove(fromRow, fromCol, toRow, toCol, board, false);\n    case \"♖\":\n    case \"♜\":\n      return isValidRookMove(fromRow, fromCol, toRow, toCol, board);\n    case \"♘\":\n    case \"♞\":\n      return isValidKnightMove(toRow - fromRow, toCol - fromCol);\n    case \"♗\":\n    case \"♝\":\n      return isValidBishopMove(fromRow, fromCol, toRow, toCol, board);\n    case \"♕\":\n    case \"♛\":\n      return isValidQueenMove(fromRow, fromCol, toRow, toCol, board);\n    case \"♔\":\n    case \"♚\":\n      return isValidKingMove(toRow - fromRow, toCol - fromCol);\n    default:\n      return false;\n  }\n};\nconst isValidPawnMove = (fromRow, fromCol, toRow, toCol, board, isWhite) => {\n  const direction = isWhite ? -1 : 1;\n  const startRow = isWhite ? 6 : 1;\n  const dy = toRow - fromRow;\n  const dx = Math.abs(toCol - fromCol);\n  if (dx === 0) {\n    if (dy === direction && !board[toRow][toCol]) return true;\n    if (fromRow === startRow && dy === 2 * direction && !board[toRow][toCol] && !board[fromRow + direction][toCol]) return true;\n  }\n  if (dx === 1 && dy === direction && board[toRow][toCol]) return true;\n  return false;\n};\nconst isValidRookMove = (fromRow, fromCol, toRow, toCol, board) => {\n  if (fromRow !== toRow && fromCol !== toCol) return false;\n  return isPathClear(fromRow, fromCol, toRow, toCol, board);\n};\nconst isValidKnightMove = (dx, dy) => {\n  return Math.abs(dx) === 2 && Math.abs(dy) === 1 || Math.abs(dx) === 1 && Math.abs(dy) === 2;\n};\nconst isValidBishopMove = (fromRow, fromCol, toRow, toCol, board) => {\n  if (Math.abs(fromRow - toRow) !== Math.abs(fromCol - toCol)) return false;\n  return isPathClear(fromRow, fromCol, toRow, toCol, board);\n};\nconst isValidQueenMove = (fromRow, fromCol, toRow, toCol, board) => {\n  return isValidRookMove(fromRow, fromCol, toRow, toCol, board) || isValidBishopMove(fromRow, fromCol, toRow, toCol, board);\n};\nconst isValidKingMove = (dx, dy) => {\n  return Math.abs(dx) <= 1 && Math.abs(dy) <= 1;\n};\nconst isPathClear = (fromRow, fromCol, toRow, toCol, board) => {\n  const dx = Math.sign(toCol - fromCol);\n  const dy = Math.sign(toRow - fromRow);\n  let x = fromCol + dx;\n  let y = fromRow + dy;\n  while (x !== toCol || y !== toRow) {\n    if (board[y][x]) return false;\n    x += dx;\n    y += dy;\n  }\n  return true;\n};\nconst checkGameOver = board => {\n  let whiteKingExists = false;\n  let blackKingExists = false;\n  for (let row of board) {\n    for (let piece of row) {\n      if (piece === \"\\u2654\") whiteKingExists = true;\n      if (piece === \"\\u265A\") blackKingExists = true;\n    }\n  }\n  if (!whiteKingExists) return \"Black wins!\";\n  if (!blackKingExists) return \"White wins!\";\n  return null;\n};\nexport { isValidMove, checkGameOver };","map":{"version":3,"names":["isValidMove","piece","fromRow","fromCol","toRow","toCol","board","isWhiteTurn","isWhite","includes","isBlack","targetPiece","isValidPawnMove","isValidRookMove","isValidKnightMove","isValidBishopMove","isValidQueenMove","isValidKingMove","direction","startRow","dy","dx","Math","abs","isPathClear","sign","x","y","checkGameOver","whiteKingExists","blackKingExists","row"],"sources":["/root/se06206-final-thaydong-nhom1/Chess-game-login/src/utils/moveRules.js"],"sourcesContent":["const isValidMove = (piece, fromRow, fromCol, toRow, toCol, board, isWhiteTurn) => {\n  if (!piece) return false;\n  if (fromRow === toRow && fromCol === toCol) return false; // Không di chuyển đến vị trí hiện tại\n\n  // ✅ **Xác định quân trắng hay đen**\n  const isWhite = [\"♙\", \"♖\", \"♘\", \"♗\", \"♕\", \"♔\"].includes(piece);\n  const isBlack = !isWhite; // Không cần khai báo thêm biến mới\n  // ✅ **Kiểm tra đúng lượt chơi**\n  if ((isWhite && !isWhiteTurn) || (!isWhite && isWhiteTurn)) return false;\n\n  const targetPiece = board[toRow][toCol];\n\n  // ✅ **Kiểm tra có ăn quân cùng màu không**\n  if (targetPiece && [\"♙\", \"♖\", \"♘\", \"♗\", \"♕\", \"♔\", \"♟\", \"♜\", \"♞\", \"♝\", \"♛\", \"♚\"].includes(targetPiece) === isWhite) return false;\n\n  switch (piece) {\n    case \"♙\": return isValidPawnMove(fromRow, fromCol, toRow, toCol, board, true);\n    case \"♟\": return isValidPawnMove(fromRow, fromCol, toRow, toCol, board, false);\n    case \"♖\": case \"♜\": return isValidRookMove(fromRow, fromCol, toRow, toCol, board);\n    case \"♘\": case \"♞\": return isValidKnightMove(toRow - fromRow, toCol - fromCol);\n    case \"♗\": case \"♝\": return isValidBishopMove(fromRow, fromCol, toRow, toCol, board);\n    case \"♕\": case \"♛\": return isValidQueenMove(fromRow, fromCol, toRow, toCol, board);\n    case \"♔\": case \"♚\": return isValidKingMove(toRow - fromRow, toCol - fromCol);\n    default: return false;\n  }\n};\n\n\n\nconst isValidPawnMove = (fromRow, fromCol, toRow, toCol, board, isWhite) => {\n  const direction = isWhite ? -1 : 1;\n  const startRow = isWhite ? 6 : 1;\n  const dy = toRow - fromRow;\n  const dx = Math.abs(toCol - fromCol);\n\n  if (dx === 0) {\n    if (dy === direction && !board[toRow][toCol]) return true;\n    if (fromRow === startRow && dy === 2 * direction && !board[toRow][toCol] && !board[fromRow + direction][toCol]) return true;\n  }\n\n  if (dx === 1 && dy === direction && board[toRow][toCol]) return true;\n\n  return false;\n};\n\nconst isValidRookMove = (fromRow, fromCol, toRow, toCol, board) => {\n  if (fromRow !== toRow && fromCol !== toCol) return false;\n  return isPathClear(fromRow, fromCol, toRow, toCol, board);\n};\n\nconst isValidKnightMove = (dx, dy) => {\n  return (Math.abs(dx) === 2 && Math.abs(dy) === 1) || (Math.abs(dx) === 1 && Math.abs(dy) === 2);\n};\n\nconst isValidBishopMove = (fromRow, fromCol, toRow, toCol, board) => {\n  if (Math.abs(fromRow - toRow) !== Math.abs(fromCol - toCol)) return false;\n  return isPathClear(fromRow, fromCol, toRow, toCol, board);\n};\n\nconst isValidQueenMove = (fromRow, fromCol, toRow, toCol, board) => {\n  return (\n    isValidRookMove(fromRow, fromCol, toRow, toCol, board) ||\n    isValidBishopMove(fromRow, fromCol, toRow, toCol, board)\n  );\n};\n\nconst isValidKingMove = (dx, dy) => {\n  return Math.abs(dx) <= 1 && Math.abs(dy) <= 1;\n};\n\nconst isPathClear = (fromRow, fromCol, toRow, toCol, board) => {\n  const dx = Math.sign(toCol - fromCol);\n  const dy = Math.sign(toRow - fromRow);\n  let x = fromCol + dx;\n  let y = fromRow + dy;\n\n  while (x !== toCol || y !== toRow) {\n    if (board[y][x]) return false;\n    x += dx;\n    y += dy;\n  }\n  return true;\n};\n\nconst checkGameOver = (board) => {\n  let whiteKingExists = false;\n  let blackKingExists = false;\n\n  for (let row of board) {\n    for (let piece of row) {\n      if (piece === \"\\u2654\") whiteKingExists = true;\n      if (piece === \"\\u265A\") blackKingExists = true;\n    }\n  }\n\n  if (!whiteKingExists) return \"Black wins!\";\n  if (!blackKingExists) return \"White wins!\";\n  return null;\n};\n\nexport { isValidMove, checkGameOver };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}