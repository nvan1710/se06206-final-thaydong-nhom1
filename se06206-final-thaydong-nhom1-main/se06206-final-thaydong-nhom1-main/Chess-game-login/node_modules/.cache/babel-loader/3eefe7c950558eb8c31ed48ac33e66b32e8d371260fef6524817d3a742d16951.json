{"ast":null,"code":"var _jsxFileName = \"/root/se06206-final-thaydong-nhom1/Chess-game-login/src/components/ChessBoard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { initialBoardSetup } from \"../data/chessPieces\";\nimport { isValidMove, isKingInCheck, getAllPossibleMoves } from \"../utils/moveRules\";\nimport Square from \"./Square\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chessboard = () => {\n  _s();\n  const [board, setBoard] = useState(initialBoardSetup);\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [turn, setTurn] = useState(\"white\");\n  const [checkStatus, setCheckStatus] = useState(null);\n  const [validMoves, setValidMoves] = useState([]);\n  useEffect(() => {\n    const kingInCheck = isKingInCheck(turn, board);\n    setCheckStatus(kingInCheck ? `${turn.toUpperCase()} is in CHECK!` : null);\n  }, [board, turn]);\n  const movePiece = (fromRow, fromCol, toRow, toCol) => {\n    setBoard(prevBoard => {\n      const newBoard = prevBoard.map(row => [...row]);\n      const piece = newBoard[fromRow][fromCol];\n      if (!isValidMove(piece, fromRow, fromCol, toRow, toCol, newBoard, turn)) return prevBoard;\n      newBoard[toRow][toCol] = piece;\n      newBoard[fromRow][fromCol] = \"\";\n      setMoveHistory(prevHistory => [...prevHistory, `${piece} ${convertToChessNotation(fromRow, fromCol)} → ${convertToChessNotation(toRow, toCol)}`]);\n      setTurn(turn === \"white\" ? \"black\" : \"white\");\n      setValidMoves([]);\n      return newBoard;\n    });\n  };\n  const handleSelectPiece = (row, col, piece) => {\n    if (turn === \"white\" && \"♙♖♘♗♕♔\".includes(piece) || turn === \"black\" && \"♟♜♞♝♛♚\".includes(piece)) {\n      setValidMoves(getAllPossibleMoves(piece, row, col, board));\n    }\n  };\n  const convertToChessNotation = (row, col) => {\n    const files = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"];\n    return `${files[col]}${8 - row}`;\n  };\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-bold mb-2\",\n        children: [turn.toUpperCase(), \"'s Turn\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), checkStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-red-500 font-bold\",\n        children: checkStatus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-8 w-[512px] h-[512px] border-4 border-black relative\",\n          children: board.map((row, rowIndex) => row.map((piece, colIndex) => /*#__PURE__*/_jsxDEV(Square, {\n            piece: piece,\n            row: rowIndex,\n            col: colIndex,\n            movePiece: movePiece,\n            turn: turn,\n            validMoves: validMoves\n          }, `${rowIndex}-${colIndex}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this)))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ml-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold mb-2\",\n            children: \"Move History\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"text-sm bg-gray-200 p-2 rounded w-40 h-64 overflow-y-auto\",\n            children: moveHistory.map((move, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"mb-1\",\n              children: `${index + 1}. ${move}`\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_s(Chessboard, \"M6TuAcI79uOjj9LwkOS1z4rEcJY=\");\n_c = Chessboard;\nexport default Chessboard;\nvar _c;\n$RefreshReg$(_c, \"Chessboard\");","map":{"version":3,"names":["React","useState","useEffect","DndProvider","HTML5Backend","initialBoardSetup","isValidMove","isKingInCheck","getAllPossibleMoves","Square","jsxDEV","_jsxDEV","Chessboard","_s","board","setBoard","moveHistory","setMoveHistory","turn","setTurn","checkStatus","setCheckStatus","validMoves","setValidMoves","kingInCheck","toUpperCase","movePiece","fromRow","fromCol","toRow","toCol","prevBoard","newBoard","map","row","piece","prevHistory","convertToChessNotation","handleSelectPiece","col","includes","files","backend","children","className","fileName","_jsxFileName","lineNumber","columnNumber","rowIndex","colIndex","move","index","_c","$RefreshReg$"],"sources":["/root/se06206-final-thaydong-nhom1/Chess-game-login/src/components/ChessBoard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\nimport { initialBoardSetup } from \"../data/chessPieces\";\nimport { isValidMove, isKingInCheck, getAllPossibleMoves } from \"../utils/moveRules\";\nimport Square from \"./Square\";\n\nconst Chessboard = () => {\n  const [board, setBoard] = useState(initialBoardSetup);\n  const [moveHistory, setMoveHistory] = useState([]);\n  const [turn, setTurn] = useState(\"white\");\n  const [checkStatus, setCheckStatus] = useState(null);\n  const [validMoves, setValidMoves] = useState([]);\n\n  useEffect(() => {\n    const kingInCheck = isKingInCheck(turn, board);\n    setCheckStatus(kingInCheck ? `${turn.toUpperCase()} is in CHECK!` : null);\n  }, [board, turn]);\n\n  const movePiece = (fromRow, fromCol, toRow, toCol) => {\n    setBoard((prevBoard) => {\n      const newBoard = prevBoard.map((row) => [...row]);\n      const piece = newBoard[fromRow][fromCol];\n\n      if (!isValidMove(piece, fromRow, fromCol, toRow, toCol, newBoard, turn)) return prevBoard;\n\n      newBoard[toRow][toCol] = piece;\n      newBoard[fromRow][fromCol] = \"\";\n\n      setMoveHistory((prevHistory) => [\n        ...prevHistory,\n        `${piece} ${convertToChessNotation(fromRow, fromCol)} → ${convertToChessNotation(toRow, toCol)}`,\n      ]);\n\n      setTurn(turn === \"white\" ? \"black\" : \"white\");\n      setValidMoves([]);\n      return newBoard;\n    });\n  };\n\n  const handleSelectPiece = (row, col, piece) => {\n    if ((turn === \"white\" && \"♙♖♘♗♕♔\".includes(piece)) || (turn === \"black\" && \"♟♜♞♝♛♚\".includes(piece))) {\n      setValidMoves(getAllPossibleMoves(piece, row, col, board));\n    }\n  };\n\n  const convertToChessNotation = (row, col) => {\n    const files = [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\"];\n    return `${files[col]}${8 - row}`;\n  };\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <div className=\"flex flex-col items-center\">\n        <h2 className=\"text-xl font-bold mb-2\">{turn.toUpperCase()}'s Turn</h2>\n        {checkStatus && <div className=\"text-red-500 font-bold\">{checkStatus}</div>}\n\n        <div className=\"flex\">\n          <div className=\"grid grid-cols-8 w-[512px] h-[512px] border-4 border-black relative\">\n            {board.map((row, rowIndex) =>\n              row.map((piece, colIndex) => (\n                <Square\n                  key={`${rowIndex}-${colIndex}`}\n                  piece={piece}\n                  row={rowIndex}\n                  col={colIndex}\n                  movePiece={movePiece}\n                  turn={turn}\n                  validMoves={validMoves}\n                />\n              ))\n            )}\n          </div>\n\n          <div className=\"ml-4\">\n            <h2 className=\"text-lg font-bold mb-2\">Move History</h2>\n            <ul className=\"text-sm bg-gray-200 p-2 rounded w-40 h-64 overflow-y-auto\">\n              {moveHistory.map((move, index) => (\n                <li key={index} className=\"mb-1\">{`${index + 1}. ${move}`}</li>\n              ))}\n            </ul>\n          </div>\n        </div>\n      </div>\n    </DndProvider>\n  );\n};\n\nexport default Chessboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}