{"ast":null,"code":"import { isValidMove } from \"./moveRules\"; // Import lu·∫≠t ƒëi c·ªù\n\n// üìç T√¨m v·ªã tr√≠ c·ªßa vua tr√™n b√†n c·ªù\n\nexport const findKingPosition = (board, isWhite) => {\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      if (board[row][col] === (isWhite ? \"‚ôî\" : \"‚ôö\")) {\n        return {\n          row,\n          col\n        };\n      }\n    }\n  }\n  return null;\n};\n\n// üìç Ki·ªÉm tra xem vua c√≥ ƒëang b·ªã chi·∫øu kh√¥ng\nexport const isKingInCheck = (board, isWhite) => {\n  const kingPos = findKingPosition(board, isWhite);\n  if (!kingPos) return false; // N·∫øu kh√¥ng t√¨m th·∫•y vua, tr√°nh l·ªói\n\n  const {\n    row: kingRow,\n    col: kingCol\n  } = kingPos;\n\n  // Duy·ªát to√†n b·ªô b√†n c·ªù ƒë·ªÉ t√¨m qu√¢n ƒë·ªëi ph∆∞∆°ng c√≥ th·ªÉ chi·∫øu vua\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue; // √î tr·ªëng => b·ªè qua\n\n      const isEnemy = \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\".includes(piece) !== isWhite;\n      if (isEnemy && isValidMove(piece, row, col, kingRow, kingCol, board)) {\n        return true; // N·∫øu c√≥ qu√¢n ƒë·ªãch c√≥ th·ªÉ ƒÉn vua => vua b·ªã chi·∫øu\n      }\n    }\n  }\n  return false; // Kh√¥ng c√≥ qu√¢n n√†o chi·∫øu vua\n};\n\n// üìç Ki·ªÉm tra chi·∫øu h·∫øt (Checkmate)\nexport const isCheckmate = (board, isWhite) => {\n  if (!isKingInCheck(board, isWhite)) return false; // N·∫øu vua kh√¥ng b·ªã chi·∫øu, kh√¥ng ph·∫£i chi·∫øu h·∫øt\n\n  // Duy·ªát to√†n b·ªô b√†n c·ªù ƒë·ªÉ t√¨m t·∫•t c·∫£ qu√¢n c·ªù c·ªßa b√™n ƒëang b·ªã chi·∫øu\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue; // √î tr·ªëng => b·ªè qua\n\n      const isFriendly = \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\".includes(piece) === isWhite;\n      if (!isFriendly) continue; // B·ªè qua qu√¢n ƒë·ªãch\n\n      // Duy·ªát t·∫•t c·∫£ c√°c √¥ ƒë·ªÉ t√¨m n∆∞·ªõc ƒëi h·ª£p l·ªá\n      for (let newRow = 0; newRow < 8; newRow++) {\n        for (let newCol = 0; newCol < 8; newCol++) {\n          if (isValidMove(piece, row, col, newRow, newCol, board)) {\n            // Gi·∫£ l·∫≠p b√†n c·ªù sau n∆∞·ªõc ƒëi\n            const newBoard = board.map(row => [...row]);\n            newBoard[newRow][newCol] = piece;\n            newBoard[row][col] = \"\";\n\n            // N·∫øu sau n∆∞·ªõc ƒëi, vua kh√¥ng b·ªã chi·∫øu => kh√¥ng ph·∫£i chi·∫øu h·∫øt\n            if (!isKingInCheck(newBoard, isWhite)) {\n              return false;\n            }\n          }\n        }\n      }\n    }\n  }\n  return true; // N·∫øu kh√¥ng c√≥ n∆∞·ªõc ƒëi n√†o c·ª©u ƒë∆∞·ª£c vua => chi·∫øu h·∫øt\n};","map":{"version":3,"names":["isValidMove","findKingPosition","board","isWhite","row","col","isKingInCheck","kingPos","kingRow","kingCol","piece","isEnemy","includes","isCheckmate","isFriendly","newRow","newCol","newBoard","map"],"sources":["D:/se06206-final-thaydong-nhom1-main/se06206-final-thaydong-nhom1-main/Chess-game-login/src/utils/checkmate.js"],"sourcesContent":["import { isValidMove } from \"./moveRules\"; // Import lu·∫≠t ƒëi c·ªù\r\n\r\n// üìç T√¨m v·ªã tr√≠ c·ªßa vua tr√™n b√†n c·ªù\r\n\r\nexport const findKingPosition = (board, isWhite) => {\r\n    for (let row = 0; row < 8; row++) {\r\n      for (let col = 0; col < 8; col++) {\r\n        if (board[row][col] === (isWhite ? \"‚ôî\" : \"‚ôö\")) {\r\n          return { row, col };\r\n        }\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n  \r\n\r\n// üìç Ki·ªÉm tra xem vua c√≥ ƒëang b·ªã chi·∫øu kh√¥ng\r\nexport const isKingInCheck = (board, isWhite) => {\r\n  const kingPos = findKingPosition(board, isWhite);\r\n  if (!kingPos) return false; // N·∫øu kh√¥ng t√¨m th·∫•y vua, tr√°nh l·ªói\r\n\r\n  const { row: kingRow, col: kingCol } = kingPos;\r\n\r\n  // Duy·ªát to√†n b·ªô b√†n c·ªù ƒë·ªÉ t√¨m qu√¢n ƒë·ªëi ph∆∞∆°ng c√≥ th·ªÉ chi·∫øu vua\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      const piece = board[row][col];\r\n      if (!piece) continue; // √î tr·ªëng => b·ªè qua\r\n\r\n      const isEnemy = \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\".includes(piece) !== isWhite;\r\n      if (isEnemy && isValidMove(piece, row, col, kingRow, kingCol, board)) {\r\n        return true; // N·∫øu c√≥ qu√¢n ƒë·ªãch c√≥ th·ªÉ ƒÉn vua => vua b·ªã chi·∫øu\r\n      }\r\n    }\r\n  }\r\n\r\n  return false; // Kh√¥ng c√≥ qu√¢n n√†o chi·∫øu vua\r\n};\r\n\r\n// üìç Ki·ªÉm tra chi·∫øu h·∫øt (Checkmate)\r\nexport const isCheckmate = (board, isWhite) => {\r\n  if (!isKingInCheck(board, isWhite)) return false; // N·∫øu vua kh√¥ng b·ªã chi·∫øu, kh√¥ng ph·∫£i chi·∫øu h·∫øt\r\n\r\n  // Duy·ªát to√†n b·ªô b√†n c·ªù ƒë·ªÉ t√¨m t·∫•t c·∫£ qu√¢n c·ªù c·ªßa b√™n ƒëang b·ªã chi·∫øu\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      const piece = board[row][col];\r\n      if (!piece) continue; // √î tr·ªëng => b·ªè qua\r\n\r\n      const isFriendly = \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\".includes(piece) === isWhite;\r\n      if (!isFriendly) continue; // B·ªè qua qu√¢n ƒë·ªãch\r\n\r\n      // Duy·ªát t·∫•t c·∫£ c√°c √¥ ƒë·ªÉ t√¨m n∆∞·ªõc ƒëi h·ª£p l·ªá\r\n      for (let newRow = 0; newRow < 8; newRow++) {\r\n        for (let newCol = 0; newCol < 8; newCol++) {\r\n          if (isValidMove(piece, row, col, newRow, newCol, board)) {\r\n            // Gi·∫£ l·∫≠p b√†n c·ªù sau n∆∞·ªõc ƒëi\r\n            const newBoard = board.map(row => [...row]);\r\n            newBoard[newRow][newCol] = piece;\r\n            newBoard[row][col] = \"\";\r\n\r\n            // N·∫øu sau n∆∞·ªõc ƒëi, vua kh√¥ng b·ªã chi·∫øu => kh√¥ng ph·∫£i chi·∫øu h·∫øt\r\n            if (!isKingInCheck(newBoard, isWhite)) {\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return true; // N·∫øu kh√¥ng c√≥ n∆∞·ªõc ƒëi n√†o c·ª©u ƒë∆∞·ª£c vua => chi·∫øu h·∫øt\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}