{"ast":null,"code":"import { isValidMove } from \"./moveRules\"; // Import luáº­t di chuyá»ƒn\n\n// ðŸ“ TÃ¬m vá»‹ trÃ­ cá»§a vua trÃªn bÃ n cá»\nexport const findKingPosition = (board, isWhite) => {\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      if (board[row][col] === (isWhite ? \"â™”\" : \"â™š\")) {\n        return {\n          row,\n          col\n        };\n      }\n    }\n  }\n  return null;\n};\n\n// ðŸ“ Kiá»ƒm tra xem quÃ¢n cá» cÃ³ pháº£i lÃ  quÃ¢n Ä‘á»‹ch khÃ´ng\nconst isEnemyPiece = (piece, isWhite) => {\n  const whitePieces = [\"â™™\", \"â™–\", \"â™˜\", \"â™—\", \"â™•\", \"â™”\"];\n  const blackPieces = [\"â™Ÿ\", \"â™œ\", \"â™ž\", \"â™\", \"â™›\", \"â™š\"];\n  return isWhite ? blackPieces.includes(piece) : whitePieces.includes(piece);\n};\n\n// ðŸ“ Kiá»ƒm tra Ä‘Æ°á»ng Ä‘i cÃ³ bá»‹ cáº£n trá»Ÿ khÃ´ng (Ã¡p dá»¥ng cho xe, tÆ°á»£ng, háº­u)\nconst isPathClear = (board, startRow, startCol, endRow, endCol, piece) => {\n  if ([\"â™–\", \"â™œ\"].includes(piece)) {\n    // Xe\n    if (startRow === endRow) {\n      let step = startCol < endCol ? 1 : -1;\n      for (let c = startCol + step; c !== endCol; c += step) {\n        if (board[startRow][c] !== \"\") return false;\n      }\n    } else if (startCol === endCol) {\n      let step = startRow < endRow ? 1 : -1;\n      for (let r = startRow + step; r !== endRow; r += step) {\n        if (board[r][startCol] !== \"\") return false;\n      }\n    }\n  } else if ([\"â™—\", \"â™\", \"â™•\", \"â™›\"].includes(piece)) {\n    // TÆ°á»£ng / Háº­u\n    let rowStep = startRow < endRow ? 1 : -1;\n    let colStep = startCol < endCol ? 1 : -1;\n    let r = startRow + rowStep;\n    let c = startCol + colStep;\n    while (r !== endRow && c !== endCol) {\n      if (board[r][c] !== \"\") return false;\n      r += rowStep;\n      c += colStep;\n    }\n  }\n  return true; // KhÃ´ng bá»‹ cáº£n trá»Ÿ\n};\n\n// ðŸ“ Kiá»ƒm tra xem vua cÃ³ bá»‹ chiáº¿u khÃ´ng\nexport const isKingInCheck = (board, isWhite, setCheckStatus) => {\n  const kingPos = findKingPosition(board, isWhite);\n  if (!kingPos) return false;\n  const {\n    row: kingRow,\n    col: kingCol\n  } = kingPos;\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue;\n      if (isEnemyPiece(piece, isWhite) && isValidMove(piece, row, col, kingRow, kingCol, board)) {\n        console.log(`âš ï¸ Vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"} Ä‘ang bá»‹ chiáº¿u bá»Ÿi quÃ¢n ${piece} tá»« (${row}, ${col})`);\n\n        // ðŸš€ Cáº­p nháº­t tráº¡ng thÃ¡i UI thay vÃ¬ alert\n        setCheckStatus(`âš ï¸ Cáº¢NH BÃO: Vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"} Ä‘ang bá»‹ chiáº¿u!`);\n        return true;\n      }\n    }\n  }\n  setCheckStatus(\"\"); // XÃ³a cáº£nh bÃ¡o náº¿u vua khÃ´ng bá»‹ chiáº¿u ná»¯a\n  return false;\n};\n\n// ðŸ“ Kiá»ƒm tra xem vua cÃ³ thá»ƒ thoÃ¡t chiáº¿u khÃ´ng\nconst canKingEscape = (board, isWhite) => {\n  const kingPos = findKingPosition(board, isWhite);\n  if (!kingPos) return false;\n  const {\n    row,\n    col\n  } = kingPos;\n  const directions = [[-1, -1], [-1, 0], [-1, 1], [0, -1], [0, 1], [1, -1], [1, 0], [1, 1]];\n  for (const [dx, dy] of directions) {\n    const newRow = row + dx;\n    const newCol = col + dy;\n    if (newRow >= 0 && newRow < 8 && newCol >= 0 && newCol < 8) {\n      if (board[newRow][newCol] === \"\" || isEnemyPiece(board[newRow][newCol], isWhite)) {\n        const tempBoard = JSON.parse(JSON.stringify(board));\n        tempBoard[newRow][newCol] = tempBoard[row][col];\n        tempBoard[row][col] = \"\";\n        if (!isKingInCheck(tempBoard, isWhite)) {\n          console.log(`âœ… Vua cÃ³ thá»ƒ thoÃ¡t Ä‘áº¿n (${newRow}, ${newCol})`);\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n\n// ðŸ“ Kiá»ƒm tra chiáº¿u háº¿t (Checkmate)\nexport const isCheckmate = (board, isWhite) => {\n  if (!isKingInCheck(board, isWhite)) return false;\n  console.log(`ðŸ”Ž Kiá»ƒm tra chiáº¿u háº¿t cho vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"}...`);\n  if (canKingEscape(board, isWhite)) return false;\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue;\n      const isFriendly = isWhite ? [\"â™™\", \"â™–\", \"â™˜\", \"â™—\", \"â™•\", \"â™”\"].includes(piece) : [\"â™Ÿ\", \"â™œ\", \"â™ž\", \"â™\", \"â™›\", \"â™š\"].includes(piece);\n      if (!isFriendly) continue;\n      for (let newRow = 0; newRow < 8; newRow++) {\n        for (let newCol = 0; newCol < 8; newCol++) {\n          if (isValidMove(piece, row, col, newRow, newCol, board) && isPathClear(board, row, col, newRow, newCol, piece)) {\n            const newBoard = JSON.parse(JSON.stringify(board));\n            newBoard[newRow][newCol] = piece;\n            newBoard[row][col] = \"\";\n            if (!isKingInCheck(newBoard, isWhite)) {\n              console.log(`âœ… TÃ¬m tháº¥y má»™t nÆ°á»›c thoÃ¡t táº¡i (${row}, ${col}) â†’ (${newRow}, ${newCol})`);\n              return false;\n            }\n          }\n        }\n      }\n    }\n  }\n  console.log(`ðŸ† Chiáº¿u háº¿t! KhÃ´ng cÃ²n nÆ°á»›c nÃ o há»£p lá»‡.`);\n  return true;\n};","map":{"version":3,"names":["isValidMove","findKingPosition","board","isWhite","row","col","isEnemyPiece","piece","whitePieces","blackPieces","includes","isPathClear","startRow","startCol","endRow","endCol","step","c","r","rowStep","colStep","isKingInCheck","setCheckStatus","kingPos","kingRow","kingCol","console","log","canKingEscape","directions","dx","dy","newRow","newCol","tempBoard","JSON","parse","stringify","isCheckmate","isFriendly","newBoard"],"sources":["D:/se06206-final-thaydong-nhom1-main/se06206-final-thaydong-nhom1-main/Chess-game-login/src/utils/checkmate.js"],"sourcesContent":["import { isValidMove } from \"./moveRules\"; // Import luáº­t di chuyá»ƒn\r\n\r\n// ðŸ“ TÃ¬m vá»‹ trÃ­ cá»§a vua trÃªn bÃ n cá»\r\nexport const findKingPosition = (board, isWhite) => {\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      if (board[row][col] === (isWhite ? \"â™”\" : \"â™š\")) {\r\n        return { row, col };\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n// ðŸ“ Kiá»ƒm tra xem quÃ¢n cá» cÃ³ pháº£i lÃ  quÃ¢n Ä‘á»‹ch khÃ´ng\r\nconst isEnemyPiece = (piece, isWhite) => {\r\n  const whitePieces = [\"â™™\", \"â™–\", \"â™˜\", \"â™—\", \"â™•\", \"â™”\"];\r\n  const blackPieces = [\"â™Ÿ\", \"â™œ\", \"â™ž\", \"â™\", \"â™›\", \"â™š\"];\r\n  return isWhite ? blackPieces.includes(piece) : whitePieces.includes(piece);\r\n};\r\n\r\n// ðŸ“ Kiá»ƒm tra Ä‘Æ°á»ng Ä‘i cÃ³ bá»‹ cáº£n trá»Ÿ khÃ´ng (Ã¡p dá»¥ng cho xe, tÆ°á»£ng, háº­u)\r\nconst isPathClear = (board, startRow, startCol, endRow, endCol, piece) => {\r\n  if ([\"â™–\", \"â™œ\"].includes(piece)) { // Xe\r\n    if (startRow === endRow) {\r\n      let step = startCol < endCol ? 1 : -1;\r\n      for (let c = startCol + step; c !== endCol; c += step) {\r\n        if (board[startRow][c] !== \"\") return false;\r\n      }\r\n    } else if (startCol === endCol) {\r\n      let step = startRow < endRow ? 1 : -1;\r\n      for (let r = startRow + step; r !== endRow; r += step) {\r\n        if (board[r][startCol] !== \"\") return false;\r\n      }\r\n    }\r\n  } else if ([\"â™—\", \"â™\", \"â™•\", \"â™›\"].includes(piece)) { // TÆ°á»£ng / Háº­u\r\n    let rowStep = startRow < endRow ? 1 : -1;\r\n    let colStep = startCol < endCol ? 1 : -1;\r\n    let r = startRow + rowStep;\r\n    let c = startCol + colStep;\r\n    while (r !== endRow && c !== endCol) {\r\n      if (board[r][c] !== \"\") return false;\r\n      r += rowStep;\r\n      c += colStep;\r\n    }\r\n  }\r\n  return true; // KhÃ´ng bá»‹ cáº£n trá»Ÿ\r\n};\r\n\r\n// ðŸ“ Kiá»ƒm tra xem vua cÃ³ bá»‹ chiáº¿u khÃ´ng\r\nexport const isKingInCheck = (board, isWhite, setCheckStatus) => {\r\n  const kingPos = findKingPosition(board, isWhite);\r\n  if (!kingPos) return false;\r\n\r\n  const { row: kingRow, col: kingCol } = kingPos;\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      const piece = board[row][col];\r\n      if (!piece) continue;\r\n\r\n      if (isEnemyPiece(piece, isWhite) && isValidMove(piece, row, col, kingRow, kingCol, board)) {\r\n        console.log(`âš ï¸ Vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"} Ä‘ang bá»‹ chiáº¿u bá»Ÿi quÃ¢n ${piece} tá»« (${row}, ${col})`);\r\n        \r\n        // ðŸš€ Cáº­p nháº­t tráº¡ng thÃ¡i UI thay vÃ¬ alert\r\n        setCheckStatus(`âš ï¸ Cáº¢NH BÃO: Vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"} Ä‘ang bá»‹ chiáº¿u!`);\r\n        \r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  setCheckStatus(\"\"); // XÃ³a cáº£nh bÃ¡o náº¿u vua khÃ´ng bá»‹ chiáº¿u ná»¯a\r\n  return false;\r\n};\r\n\r\n\r\n\r\n// ðŸ“ Kiá»ƒm tra xem vua cÃ³ thá»ƒ thoÃ¡t chiáº¿u khÃ´ng\r\nconst canKingEscape = (board, isWhite) => {\r\n  const kingPos = findKingPosition(board, isWhite);\r\n  if (!kingPos) return false;\r\n\r\n  const { row, col } = kingPos;\r\n  const directions = [\r\n    [-1, -1], [-1, 0], [-1, 1], \r\n    [0, -1],          [0, 1], \r\n    [1, -1], [1, 0], [1, 1]\r\n  ]; \r\n\r\n  for (const [dx, dy] of directions) {\r\n    const newRow = row + dx;\r\n    const newCol = col + dy;\r\n\r\n    if (newRow >= 0 && newRow < 8 && newCol >= 0 && newCol < 8) {\r\n      if (board[newRow][newCol] === \"\" || isEnemyPiece(board[newRow][newCol], isWhite)) {\r\n        const tempBoard = JSON.parse(JSON.stringify(board));\r\n        tempBoard[newRow][newCol] = tempBoard[row][col];\r\n        tempBoard[row][col] = \"\";\r\n\r\n        if (!isKingInCheck(tempBoard, isWhite)) {\r\n          console.log(`âœ… Vua cÃ³ thá»ƒ thoÃ¡t Ä‘áº¿n (${newRow}, ${newCol})`);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\n// ðŸ“ Kiá»ƒm tra chiáº¿u háº¿t (Checkmate)\r\nexport const isCheckmate = (board, isWhite) => {\r\n  if (!isKingInCheck(board, isWhite)) return false;\r\n\r\n  console.log(`ðŸ”Ž Kiá»ƒm tra chiáº¿u háº¿t cho vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"}...`);\r\n\r\n  if (canKingEscape(board, isWhite)) return false;\r\n\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      const piece = board[row][col];\r\n      if (!piece) continue;\r\n\r\n      const isFriendly = isWhite\r\n        ? [\"â™™\", \"â™–\", \"â™˜\", \"â™—\", \"â™•\", \"â™”\"].includes(piece)\r\n        : [\"â™Ÿ\", \"â™œ\", \"â™ž\", \"â™\", \"â™›\", \"â™š\"].includes(piece);\r\n\r\n      if (!isFriendly) continue;\r\n\r\n      for (let newRow = 0; newRow < 8; newRow++) {\r\n        for (let newCol = 0; newCol < 8; newCol++) {\r\n          if (isValidMove(piece, row, col, newRow, newCol, board) &&\r\n              isPathClear(board, row, col, newRow, newCol, piece)) {\r\n            \r\n            const newBoard = JSON.parse(JSON.stringify(board));\r\n            newBoard[newRow][newCol] = piece;\r\n            newBoard[row][col] = \"\";\r\n\r\n            if (!isKingInCheck(newBoard, isWhite)) {\r\n              console.log(`âœ… TÃ¬m tháº¥y má»™t nÆ°á»›c thoÃ¡t táº¡i (${row}, ${col}) â†’ (${newRow}, ${newCol})`);\r\n              return false;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(`ðŸ† Chiáº¿u háº¿t! KhÃ´ng cÃ²n nÆ°á»›c nÃ o há»£p lá»‡.`);\r\n  return true;\r\n};\r\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,aAAa,CAAC,CAAC;;AAE3C;AACA,OAAO,MAAMC,gBAAgB,GAAGA,CAACC,KAAK,EAAEC,OAAO,KAAK;EAClD,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC,EAAEA,GAAG,EAAE,EAAE;IAChC,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC,EAAEA,GAAG,EAAE,EAAE;MAChC,IAAIH,KAAK,CAACE,GAAG,CAAC,CAACC,GAAG,CAAC,MAAMF,OAAO,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE;QAC7C,OAAO;UAAEC,GAAG;UAAEC;QAAI,CAAC;MACrB;IACF;EACF;EACA,OAAO,IAAI;AACb,CAAC;;AAED;AACA,MAAMC,YAAY,GAAGA,CAACC,KAAK,EAAEJ,OAAO,KAAK;EACvC,MAAMK,WAAW,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;EAClD,MAAMC,WAAW,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC;EAClD,OAAON,OAAO,GAAGM,WAAW,CAACC,QAAQ,CAACH,KAAK,CAAC,GAAGC,WAAW,CAACE,QAAQ,CAACH,KAAK,CAAC;AAC5E,CAAC;;AAED;AACA,MAAMI,WAAW,GAAGA,CAACT,KAAK,EAAEU,QAAQ,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,MAAM,EAAER,KAAK,KAAK;EACxE,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAACG,QAAQ,CAACH,KAAK,CAAC,EAAE;IAAE;IAChC,IAAIK,QAAQ,KAAKE,MAAM,EAAE;MACvB,IAAIE,IAAI,GAAGH,QAAQ,GAAGE,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;MACrC,KAAK,IAAIE,CAAC,GAAGJ,QAAQ,GAAGG,IAAI,EAAEC,CAAC,KAAKF,MAAM,EAAEE,CAAC,IAAID,IAAI,EAAE;QACrD,IAAId,KAAK,CAACU,QAAQ,CAAC,CAACK,CAAC,CAAC,KAAK,EAAE,EAAE,OAAO,KAAK;MAC7C;IACF,CAAC,MAAM,IAAIJ,QAAQ,KAAKE,MAAM,EAAE;MAC9B,IAAIC,IAAI,GAAGJ,QAAQ,GAAGE,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;MACrC,KAAK,IAAII,CAAC,GAAGN,QAAQ,GAAGI,IAAI,EAAEE,CAAC,KAAKJ,MAAM,EAAEI,CAAC,IAAIF,IAAI,EAAE;QACrD,IAAId,KAAK,CAACgB,CAAC,CAAC,CAACL,QAAQ,CAAC,KAAK,EAAE,EAAE,OAAO,KAAK;MAC7C;IACF;EACF,CAAC,MAAM,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAACH,QAAQ,CAACH,KAAK,CAAC,EAAE;IAAE;IACjD,IAAIY,OAAO,GAAGP,QAAQ,GAAGE,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;IACxC,IAAIM,OAAO,GAAGP,QAAQ,GAAGE,MAAM,GAAG,CAAC,GAAG,CAAC,CAAC;IACxC,IAAIG,CAAC,GAAGN,QAAQ,GAAGO,OAAO;IAC1B,IAAIF,CAAC,GAAGJ,QAAQ,GAAGO,OAAO;IAC1B,OAAOF,CAAC,KAAKJ,MAAM,IAAIG,CAAC,KAAKF,MAAM,EAAE;MACnC,IAAIb,KAAK,CAACgB,CAAC,CAAC,CAACD,CAAC,CAAC,KAAK,EAAE,EAAE,OAAO,KAAK;MACpCC,CAAC,IAAIC,OAAO;MACZF,CAAC,IAAIG,OAAO;IACd;EACF;EACA,OAAO,IAAI,CAAC,CAAC;AACf,CAAC;;AAED;AACA,OAAO,MAAMC,aAAa,GAAGA,CAACnB,KAAK,EAAEC,OAAO,EAAEmB,cAAc,KAAK;EAC/D,MAAMC,OAAO,GAAGtB,gBAAgB,CAACC,KAAK,EAAEC,OAAO,CAAC;EAChD,IAAI,CAACoB,OAAO,EAAE,OAAO,KAAK;EAE1B,MAAM;IAAEnB,GAAG,EAAEoB,OAAO;IAAEnB,GAAG,EAAEoB;EAAQ,CAAC,GAAGF,OAAO;EAC9C,KAAK,IAAInB,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC,EAAEA,GAAG,EAAE,EAAE;IAChC,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC,EAAEA,GAAG,EAAE,EAAE;MAChC,MAAME,KAAK,GAAGL,KAAK,CAACE,GAAG,CAAC,CAACC,GAAG,CAAC;MAC7B,IAAI,CAACE,KAAK,EAAE;MAEZ,IAAID,YAAY,CAACC,KAAK,EAAEJ,OAAO,CAAC,IAAIH,WAAW,CAACO,KAAK,EAAEH,GAAG,EAAEC,GAAG,EAAEmB,OAAO,EAAEC,OAAO,EAAEvB,KAAK,CAAC,EAAE;QACzFwB,OAAO,CAACC,GAAG,CAAC,UAAUxB,OAAO,GAAG,OAAO,GAAG,KAAK,2BAA2BI,KAAK,QAAQH,GAAG,KAAKC,GAAG,GAAG,CAAC;;QAEtG;QACAiB,cAAc,CAAC,oBAAoBnB,OAAO,GAAG,OAAO,GAAG,KAAK,iBAAiB,CAAC;QAE9E,OAAO,IAAI;MACb;IACF;EACF;EAEAmB,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;EACpB,OAAO,KAAK;AACd,CAAC;;AAID;AACA,MAAMM,aAAa,GAAGA,CAAC1B,KAAK,EAAEC,OAAO,KAAK;EACxC,MAAMoB,OAAO,GAAGtB,gBAAgB,CAACC,KAAK,EAAEC,OAAO,CAAC;EAChD,IAAI,CAACoB,OAAO,EAAE,OAAO,KAAK;EAE1B,MAAM;IAAEnB,GAAG;IAAEC;EAAI,CAAC,GAAGkB,OAAO;EAC5B,MAAMM,UAAU,GAAG,CACjB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAC1B,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAW,CAAC,CAAC,EAAE,CAAC,CAAC,EACxB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CACxB;EAED,KAAK,MAAM,CAACC,EAAE,EAAEC,EAAE,CAAC,IAAIF,UAAU,EAAE;IACjC,MAAMG,MAAM,GAAG5B,GAAG,GAAG0B,EAAE;IACvB,MAAMG,MAAM,GAAG5B,GAAG,GAAG0B,EAAE;IAEvB,IAAIC,MAAM,IAAI,CAAC,IAAIA,MAAM,GAAG,CAAC,IAAIC,MAAM,IAAI,CAAC,IAAIA,MAAM,GAAG,CAAC,EAAE;MAC1D,IAAI/B,KAAK,CAAC8B,MAAM,CAAC,CAACC,MAAM,CAAC,KAAK,EAAE,IAAI3B,YAAY,CAACJ,KAAK,CAAC8B,MAAM,CAAC,CAACC,MAAM,CAAC,EAAE9B,OAAO,CAAC,EAAE;QAChF,MAAM+B,SAAS,GAAGC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACnC,KAAK,CAAC,CAAC;QACnDgC,SAAS,CAACF,MAAM,CAAC,CAACC,MAAM,CAAC,GAAGC,SAAS,CAAC9B,GAAG,CAAC,CAACC,GAAG,CAAC;QAC/C6B,SAAS,CAAC9B,GAAG,CAAC,CAACC,GAAG,CAAC,GAAG,EAAE;QAExB,IAAI,CAACgB,aAAa,CAACa,SAAS,EAAE/B,OAAO,CAAC,EAAE;UACtCuB,OAAO,CAACC,GAAG,CAAC,2BAA2BK,MAAM,KAAKC,MAAM,GAAG,CAAC;UAC5D,OAAO,IAAI;QACb;MACF;IACF;EACF;EACA,OAAO,KAAK;AACd,CAAC;;AAED;AACA,OAAO,MAAMK,WAAW,GAAGA,CAACpC,KAAK,EAAEC,OAAO,KAAK;EAC7C,IAAI,CAACkB,aAAa,CAACnB,KAAK,EAAEC,OAAO,CAAC,EAAE,OAAO,KAAK;EAEhDuB,OAAO,CAACC,GAAG,CAAC,iCAAiCxB,OAAO,GAAG,OAAO,GAAG,KAAK,KAAK,CAAC;EAE5E,IAAIyB,aAAa,CAAC1B,KAAK,EAAEC,OAAO,CAAC,EAAE,OAAO,KAAK;EAE/C,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC,EAAEA,GAAG,EAAE,EAAE;IAChC,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAG,CAAC,EAAEA,GAAG,EAAE,EAAE;MAChC,MAAME,KAAK,GAAGL,KAAK,CAACE,GAAG,CAAC,CAACC,GAAG,CAAC;MAC7B,IAAI,CAACE,KAAK,EAAE;MAEZ,MAAMgC,UAAU,GAAGpC,OAAO,GACtB,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAACO,QAAQ,CAACH,KAAK,CAAC,GAC9C,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAACG,QAAQ,CAACH,KAAK,CAAC;MAElD,IAAI,CAACgC,UAAU,EAAE;MAEjB,KAAK,IAAIP,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAG,CAAC,EAAEA,MAAM,EAAE,EAAE;QACzC,KAAK,IAAIC,MAAM,GAAG,CAAC,EAAEA,MAAM,GAAG,CAAC,EAAEA,MAAM,EAAE,EAAE;UACzC,IAAIjC,WAAW,CAACO,KAAK,EAAEH,GAAG,EAAEC,GAAG,EAAE2B,MAAM,EAAEC,MAAM,EAAE/B,KAAK,CAAC,IACnDS,WAAW,CAACT,KAAK,EAAEE,GAAG,EAAEC,GAAG,EAAE2B,MAAM,EAAEC,MAAM,EAAE1B,KAAK,CAAC,EAAE;YAEvD,MAAMiC,QAAQ,GAAGL,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,SAAS,CAACnC,KAAK,CAAC,CAAC;YAClDsC,QAAQ,CAACR,MAAM,CAAC,CAACC,MAAM,CAAC,GAAG1B,KAAK;YAChCiC,QAAQ,CAACpC,GAAG,CAAC,CAACC,GAAG,CAAC,GAAG,EAAE;YAEvB,IAAI,CAACgB,aAAa,CAACmB,QAAQ,EAAErC,OAAO,CAAC,EAAE;cACrCuB,OAAO,CAACC,GAAG,CAAC,kCAAkCvB,GAAG,KAAKC,GAAG,QAAQ2B,MAAM,KAAKC,MAAM,GAAG,CAAC;cACtF,OAAO,KAAK;YACd;UACF;QACF;MACF;IACF;EACF;EAEAP,OAAO,CAACC,GAAG,CAAC,0CAA0C,CAAC;EACvD,OAAO,IAAI;AACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}