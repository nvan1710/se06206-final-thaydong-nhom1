{"ast":null,"code":"import { isValidMove } from \"./moveRules\"; // Import lu·∫≠t di chuy·ªÉn\n\n// üìç T√¨m v·ªã tr√≠ c·ªßa vua tr√™n b√†n c·ªù\nexport const findKingPosition = (board, isWhite) => {\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      if (board[row][col] === (isWhite ? \"‚ôî\" : \"‚ôö\")) {\n        return {\n          row,\n          col\n        };\n      }\n    }\n  }\n  return null;\n};\n\n// üìç Ki·ªÉm tra xem vua c√≥ b·ªã chi·∫øu kh√¥ng\nexport const isKingInCheck = (board, isWhiteTurn) => {\n  const kingSymbol = isWhiteTurn ? \"‚ôî\" : \"‚ôö\";\n  const kingPos = findKingPosition(board, isWhiteTurn);\n  if (!kingPos) return false;\n  console.log(`üîç Ki·ªÉm tra chi·∫øu cho vua ${isWhiteTurn ? \"tr·∫Øng\" : \"ƒëen\"} t·∫°i (${kingPos.row}, ${kingPos.col})`);\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (piece && (isWhiteTurn ? \"‚ôü‚ôú‚ôû‚ôù‚ôõ‚ôö\" : \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\").includes(piece)) {\n        const moves = getValidMoves(piece, row, col, board);\n        if (moves.some(move => move.row === kingPos.row && move.col === kingPos.col)) {\n          console.log(`üî• Vua b·ªã chi·∫øu b·ªüi ${piece} t·ª´ (${row}, ${col})`);\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n\n// üìç Ki·ªÉm tra chi·∫øu h·∫øt (Checkmate)\nexport const isCheckmate = (board, isWhite) => {\n  if (!isKingInCheck(board, isWhite)) return false; // N·∫øu vua kh√¥ng b·ªã chi·∫øu, kh√¥ng ph·∫£i chi·∫øu h·∫øt\n\n  console.log(`üîé Ki·ªÉm tra chi·∫øu h·∫øt cho vua ${isWhite ? \"tr·∫Øng\" : \"ƒëen\"}...`);\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue; // Kh√¥ng c√≥ qu√¢n n√†o ·ªü √¥ n√†y\n\n      const isFriendly = isWhite ? \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\".includes(piece) : \"‚ôü‚ôú‚ôû‚ôù‚ôõ‚ôö\".includes(piece);\n      if (!isFriendly) continue; // Ch·ªâ x√©t qu√¢n c·ªßa ch√≠nh m√¨nh\n\n      for (let newRow = 0; newRow < 8; newRow++) {\n        for (let newCol = 0; newCol < 8; newCol++) {\n          if (!isValidMove(piece, row, col, newRow, newCol, board)) continue; // B·ªè qua n∆∞·ªõc ƒëi kh√¥ng h·ª£p l·ªá\n\n          // T·∫°o b·∫£n sao b√†n c·ªù ƒë·ªÉ ki·ªÉm tra n∆∞·ªõc ƒëi\n          const newBoard = board.map(innerRow => [...innerRow]);\n          newBoard[newRow][newCol] = piece;\n          newBoard[row][col] = \"\"; // X√≥a qu√¢n kh·ªèi v·ªã tr√≠ c≈©\n\n          // N·∫øu vua tho√°t chi·∫øu, kh√¥ng ph·∫£i chi·∫øu h·∫øt\n          if (!isKingInCheck(newBoard, isWhite)) {\n            console.log(`‚úÖ C√≥ n∆∞·ªõc tho√°t: (${row}, ${col}) ‚Üí (${newRow}, ${newCol})`);\n            return false;\n          }\n        }\n      }\n    }\n  }\n  console.log(`üèÜ Chi·∫øu h·∫øt! Kh√¥ng c√≤n n∆∞·ªõc n√†o h·ª£p l·ªá.`);\n  return true; // Kh√¥ng c√≥ n∆∞·ªõc n√†o h·ª£p l·ªá ‚Üí chi·∫øu h·∫øt\n};","map":{"version":3,"names":["isValidMove","findKingPosition","board","isWhite","row","col","isKingInCheck","isWhiteTurn","kingSymbol","kingPos","console","log","piece","includes","moves","getValidMoves","some","move","isCheckmate","isFriendly","newRow","newCol","newBoard","map","innerRow"],"sources":["D:/se06206-final-thaydong-nhom1-main/se06206-final-thaydong-nhom1-main/Chess-game-login/src/utils/checkmate.js"],"sourcesContent":["import { isValidMove } from \"./moveRules\"; // Import lu·∫≠t di chuy·ªÉn\r\n\r\n// üìç T√¨m v·ªã tr√≠ c·ªßa vua tr√™n b√†n c·ªù\r\nexport const findKingPosition = (board, isWhite) => {\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      if (board[row][col] === (isWhite ? \"‚ôî\" : \"‚ôö\")) {\r\n        return { row, col };\r\n      }\r\n    }\r\n  }\r\n  return null;\r\n};\r\n\r\n// üìç Ki·ªÉm tra xem vua c√≥ b·ªã chi·∫øu kh√¥ng\r\nexport const isKingInCheck = (board, isWhiteTurn) => {\r\n  const kingSymbol = isWhiteTurn ? \"‚ôî\" : \"‚ôö\";\r\n  const kingPos = findKingPosition(board, isWhiteTurn);\r\n\r\n  if (!kingPos) return false;\r\n\r\n  console.log(`üîç Ki·ªÉm tra chi·∫øu cho vua ${isWhiteTurn ? \"tr·∫Øng\" : \"ƒëen\"} t·∫°i (${kingPos.row}, ${kingPos.col})`);\r\n\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      const piece = board[row][col];\r\n\r\n      if (piece && (isWhiteTurn ? \"‚ôü‚ôú‚ôû‚ôù‚ôõ‚ôö\" : \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\").includes(piece)) {\r\n        const moves = getValidMoves(piece, row, col, board);\r\n        if (moves.some(move => move.row === kingPos.row && move.col === kingPos.col)) {\r\n          console.log(`üî• Vua b·ªã chi·∫øu b·ªüi ${piece} t·ª´ (${row}, ${col})`);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\n\r\n// üìç Ki·ªÉm tra chi·∫øu h·∫øt (Checkmate)\r\nexport const isCheckmate = (board, isWhite) => {\r\n  if (!isKingInCheck(board, isWhite)) return false; // N·∫øu vua kh√¥ng b·ªã chi·∫øu, kh√¥ng ph·∫£i chi·∫øu h·∫øt\r\n\r\n  console.log(`üîé Ki·ªÉm tra chi·∫øu h·∫øt cho vua ${isWhite ? \"tr·∫Øng\" : \"ƒëen\"}...`);\r\n\r\n  for (let row = 0; row < 8; row++) {\r\n    for (let col = 0; col < 8; col++) {\r\n      const piece = board[row][col];\r\n      if (!piece) continue; // Kh√¥ng c√≥ qu√¢n n√†o ·ªü √¥ n√†y\r\n\r\n      const isFriendly = isWhite ? \"‚ôô‚ôñ‚ôò‚ôó‚ôï‚ôî\".includes(piece) : \"‚ôü‚ôú‚ôû‚ôù‚ôõ‚ôö\".includes(piece);\r\n      if (!isFriendly) continue; // Ch·ªâ x√©t qu√¢n c·ªßa ch√≠nh m√¨nh\r\n\r\n      for (let newRow = 0; newRow < 8; newRow++) {\r\n        for (let newCol = 0; newCol < 8; newCol++) {\r\n          if (!isValidMove(piece, row, col, newRow, newCol, board)) continue; // B·ªè qua n∆∞·ªõc ƒëi kh√¥ng h·ª£p l·ªá\r\n\r\n          // T·∫°o b·∫£n sao b√†n c·ªù ƒë·ªÉ ki·ªÉm tra n∆∞·ªõc ƒëi\r\n          const newBoard = board.map(innerRow => [...innerRow]);\r\n          newBoard[newRow][newCol] = piece;\r\n          newBoard[row][col] = \"\"; // X√≥a qu√¢n kh·ªèi v·ªã tr√≠ c≈©\r\n\r\n          // N·∫øu vua tho√°t chi·∫øu, kh√¥ng ph·∫£i chi·∫øu h·∫øt\r\n          if (!isKingInCheck(newBoard, isWhite)) {\r\n            console.log(`‚úÖ C√≥ n∆∞·ªõc tho√°t: (${row}, ${col}) ‚Üí (${newRow}, ${newCol})`);\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  console.log(`üèÜ Chi·∫øu h·∫øt! Kh√¥ng c√≤n n∆∞·ªõc n√†o h·ª£p l·ªá.`);\r\n  return true; // Kh√¥ng c√≥ n∆∞·ªõc n√†o h·ª£p l·ªá ‚Üí chi·∫øu h·∫øt\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}