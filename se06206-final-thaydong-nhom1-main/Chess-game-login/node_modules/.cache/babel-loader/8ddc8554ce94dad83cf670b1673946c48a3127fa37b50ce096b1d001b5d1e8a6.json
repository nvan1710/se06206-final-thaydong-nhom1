{"ast":null,"code":"import { Client } from \"@stomp/stompjs\";\nconst WebSocketService = {\n  client: null,\n  connect(onMoveReceived) {\n    this.client = new Client({\n      brokerURL: \"ws://localhost:8080/ws\",\n      // Đổi URL nếu cần\n      onConnect: () => {\n        console.log(\"✅ WebSocket connected!\");\n        this.client.subscribe(\"/topic/move\", message => {\n          if (message.body) {\n            const moveData = JSON.parse(message.body);\n            onMoveReceived(moveData);\n          }\n        });\n      },\n      onDisconnect: () => {\n        console.log(\"❌ WebSocket disconnected!\");\n      },\n      onStompError: frame => {\n        console.error(\"🚨 STOMP Error: \", frame.headers[\"message\"]);\n      }\n    });\n    this.client.activate();\n  },\n  sendMove(fromRow, fromCol, toRow, toCol) {\n    if (this.client && this.client.connected) {\n      const moveData = {\n        fromRow,\n        fromCol,\n        toRow,\n        toCol\n      };\n      this.client.publish({\n        destination: \"/app/move\",\n        body: JSON.stringify(moveData)\n      });\n    } else {\n      console.error(\"🚨 Error: No WebSocket connection!\");\n    }\n  },\n  disconnect() {\n    if (this.client) {\n      this.client.deactivate();\n    }\n  }\n};\nexport default WebSocketService;","map":{"version":3,"names":["Client","WebSocketService","client","connect","onMoveReceived","brokerURL","onConnect","console","log","subscribe","message","body","moveData","JSON","parse","onDisconnect","onStompError","frame","error","headers","activate","sendMove","fromRow","fromCol","toRow","toCol","connected","publish","destination","stringify","disconnect","deactivate"],"sources":["D:/se06206-final-thaydong-nhom1-main/se06206-final-thaydong-nhom1-main/Chess-game-login/src/websocket/WebSocketService.js"],"sourcesContent":["import { Client } from \"@stomp/stompjs\";\r\n\r\nconst WebSocketService = {\r\n  client: null,\r\n\r\n  connect(onMoveReceived) {\r\n    this.client = new Client({\r\n      brokerURL: \"ws://localhost:8080/ws\", // Đổi URL nếu cần\r\n      onConnect: () => {\r\n        console.log(\"✅ WebSocket connected!\");\r\n\r\n        this.client.subscribe(\"/topic/move\", (message) => {\r\n          if (message.body) {\r\n            const moveData = JSON.parse(message.body);\r\n            onMoveReceived(moveData);\r\n          }\r\n        });\r\n      },\r\n      onDisconnect: () => {\r\n        console.log(\"❌ WebSocket disconnected!\");\r\n      },\r\n      onStompError: (frame) => {\r\n        console.error(\"🚨 STOMP Error: \", frame.headers[\"message\"]);\r\n      },\r\n    });\r\n\r\n    this.client.activate();\r\n  },\r\n\r\n  sendMove(fromRow, fromCol, toRow, toCol) {\r\n    if (this.client && this.client.connected) {\r\n      const moveData = { fromRow, fromCol, toRow, toCol };\r\n      this.client.publish({\r\n        destination: \"/app/move\",\r\n        body: JSON.stringify(moveData),\r\n      });\r\n    } else {\r\n      console.error(\"🚨 Error: No WebSocket connection!\");\r\n    }\r\n  },\r\n\r\n  disconnect() {\r\n    if (this.client) {\r\n      this.client.deactivate();\r\n    }\r\n  },\r\n};\r\n\r\nexport default WebSocketService;\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAEvC,MAAMC,gBAAgB,GAAG;EACvBC,MAAM,EAAE,IAAI;EAEZC,OAAOA,CAACC,cAAc,EAAE;IACtB,IAAI,CAACF,MAAM,GAAG,IAAIF,MAAM,CAAC;MACvBK,SAAS,EAAE,wBAAwB;MAAE;MACrCC,SAAS,EAAEA,CAAA,KAAM;QACfC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;QAErC,IAAI,CAACN,MAAM,CAACO,SAAS,CAAC,aAAa,EAAGC,OAAO,IAAK;UAChD,IAAIA,OAAO,CAACC,IAAI,EAAE;YAChB,MAAMC,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACJ,OAAO,CAACC,IAAI,CAAC;YACzCP,cAAc,CAACQ,QAAQ,CAAC;UAC1B;QACF,CAAC,CAAC;MACJ,CAAC;MACDG,YAAY,EAAEA,CAAA,KAAM;QAClBR,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;MAC1C,CAAC;MACDQ,YAAY,EAAGC,KAAK,IAAK;QACvBV,OAAO,CAACW,KAAK,CAAC,kBAAkB,EAAED,KAAK,CAACE,OAAO,CAAC,SAAS,CAAC,CAAC;MAC7D;IACF,CAAC,CAAC;IAEF,IAAI,CAACjB,MAAM,CAACkB,QAAQ,CAAC,CAAC;EACxB,CAAC;EAEDC,QAAQA,CAACC,OAAO,EAAEC,OAAO,EAAEC,KAAK,EAAEC,KAAK,EAAE;IACvC,IAAI,IAAI,CAACvB,MAAM,IAAI,IAAI,CAACA,MAAM,CAACwB,SAAS,EAAE;MACxC,MAAMd,QAAQ,GAAG;QAAEU,OAAO;QAAEC,OAAO;QAAEC,KAAK;QAAEC;MAAM,CAAC;MACnD,IAAI,CAACvB,MAAM,CAACyB,OAAO,CAAC;QAClBC,WAAW,EAAE,WAAW;QACxBjB,IAAI,EAAEE,IAAI,CAACgB,SAAS,CAACjB,QAAQ;MAC/B,CAAC,CAAC;IACJ,CAAC,MAAM;MACLL,OAAO,CAACW,KAAK,CAAC,oCAAoC,CAAC;IACrD;EACF,CAAC;EAEDY,UAAUA,CAAA,EAAG;IACX,IAAI,IAAI,CAAC5B,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAAC6B,UAAU,CAAC,CAAC;IAC1B;EACF;AACF,CAAC;AAED,eAAe9B,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}