{"ast":null,"code":"import { Client } from '@stomp/stompjs';\nconst socket = new Client({\n  brokerURL: 'ws://localhost:8080/ws',\n  reconnectDelay: 5000 // Tự động reconnect\n});\nsocket.onConnect = () => {\n  console.log('✅ WebSocket connected');\n\n  // Đăng ký nhận dữ liệu từ /topic/chess-updates\n  socket.subscribe('/topic/chess-updates', message => {\n    console.log('📩 Received:', message.body);\n  });\n};\n\n// 👉 Thêm hàm ngắt kết nối\nexport const disconnectWebSocket = () => {\n  if (socket) {\n    socket.deactivate();\n    console.log('🔴 WebSocket disconnected');\n  }\n};\n\n// Kích hoạt WebSocket\nsocket.activate();\nexport default socket;","map":{"version":3,"names":["Client","socket","brokerURL","reconnectDelay","onConnect","console","log","subscribe","message","body","disconnectWebSocket","deactivate","activate"],"sources":["D:/se06206-final-thaydong-nhom1-main/se06206-final-thaydong-nhom1-main/Chess-game-login/src/websocket/websocket.js"],"sourcesContent":["import { Client } from '@stomp/stompjs';\r\n\r\nconst socket = new Client({\r\n    brokerURL: 'ws://localhost:8080/ws',\r\n    reconnectDelay: 5000, // Tự động reconnect\r\n});\r\n\r\nsocket.onConnect = () => {\r\n    console.log('✅ WebSocket connected');\r\n    \r\n    // Đăng ký nhận dữ liệu từ /topic/chess-updates\r\n    socket.subscribe('/topic/chess-updates', (message) => {\r\n        console.log('📩 Received:', message.body);\r\n    });\r\n};\r\n\r\n// 👉 Thêm hàm ngắt kết nối\r\nexport const disconnectWebSocket = () => {\r\n    if (socket) {\r\n        socket.deactivate();\r\n        console.log('🔴 WebSocket disconnected');\r\n    }\r\n};\r\n\r\n// Kích hoạt WebSocket\r\nsocket.activate();\r\n\r\nexport default socket;\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAEvC,MAAMC,MAAM,GAAG,IAAID,MAAM,CAAC;EACtBE,SAAS,EAAE,wBAAwB;EACnCC,cAAc,EAAE,IAAI,CAAE;AAC1B,CAAC,CAAC;AAEFF,MAAM,CAACG,SAAS,GAAG,MAAM;EACrBC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;;EAEpC;EACAL,MAAM,CAACM,SAAS,CAAC,sBAAsB,EAAGC,OAAO,IAAK;IAClDH,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEE,OAAO,CAACC,IAAI,CAAC;EAC7C,CAAC,CAAC;AACN,CAAC;;AAED;AACA,OAAO,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EACrC,IAAIT,MAAM,EAAE;IACRA,MAAM,CAACU,UAAU,CAAC,CAAC;IACnBN,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;EAC5C;AACJ,CAAC;;AAED;AACAL,MAAM,CAACW,QAAQ,CAAC,CAAC;AAEjB,eAAeX,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}