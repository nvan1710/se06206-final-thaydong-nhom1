{"ast":null,"code":"import { Client } from \"@stomp/stompjs\";\nconst client = new Client({\n  brokerURL: \"ws://localhost:8080/ws\",\n  // ƒê·ªãa ch·ªâ WebSocket backend\n  reconnectDelay: 5000,\n  // T·ª± ƒë·ªông reconnect n·∫øu m·∫•t k·∫øt n·ªëi\n  debug: msg => console.log(\"üîß STOMP Debug:\", msg)\n});\nclient.onConnect = () => {\n  console.log(\"‚úÖ WebSocket connected\");\n  client.subscribe(\"/topic/chess-updates\", message => {\n    try {\n      const move = JSON.parse(message.body);\n      console.log(`üì© Move received: ${move.from} -> ${move.to}`);\n      updateBoard(move);\n    } catch (error) {\n      console.error(\"üö® JSON parse error:\", error);\n    }\n  });\n};\nclient.onStompError = frame => {\n  console.error(\"‚ùå STOMP error:\", frame);\n};\nclient.onWebSocketClose = () => {\n  console.log(\"üî¥ WebSocket disconnected\");\n};\nclient.activate();\nexport function sendMove(from, to) {\n  if (client.connected) {\n    client.publish({\n      destination: \"/app/move\",\n      body: JSON.stringify({\n        from,\n        to\n      })\n    });\n  } else {\n    console.error(\"‚ùå Cannot send move, WebSocket is not connected\");\n  }\n}\nfunction updateBoard(move) {\n  console.log(`‚è≥ Updating board: ${move.from} -> ${move.to}`);\n  // Th√™m code c·∫≠p nh·∫≠t giao di·ªán b√†n c·ªù ·ªü ƒë√¢y\n}","map":{"version":3,"names":["Client","client","brokerURL","reconnectDelay","debug","msg","console","log","onConnect","subscribe","message","move","JSON","parse","body","from","to","updateBoard","error","onStompError","frame","onWebSocketClose","activate","sendMove","connected","publish","destination","stringify"],"sources":["D:/se06206-final-thaydong-nhom1-main/se06206-final-thaydong-nhom1-main/Chess-game-login/src/websocket/websocket.js"],"sourcesContent":["import { Client } from \"@stomp/stompjs\";\r\n\r\nconst client = new Client({\r\n    brokerURL: \"ws://localhost:8080/ws\", // ƒê·ªãa ch·ªâ WebSocket backend\r\n    reconnectDelay: 5000, // T·ª± ƒë·ªông reconnect n·∫øu m·∫•t k·∫øt n·ªëi\r\n    debug: (msg) => console.log(\"üîß STOMP Debug:\", msg),\r\n});\r\n\r\nclient.onConnect = () => {\r\n    console.log(\"‚úÖ WebSocket connected\");\r\n\r\n    client.subscribe(\"/topic/chess-updates\", (message) => {\r\n        try {\r\n            const move = JSON.parse(message.body);\r\n            console.log(`üì© Move received: ${move.from} -> ${move.to}`);\r\n            updateBoard(move);\r\n        } catch (error) {\r\n            console.error(\"üö® JSON parse error:\", error);\r\n        }\r\n    });\r\n};\r\n\r\nclient.onStompError = (frame) => {\r\n    console.error(\"‚ùå STOMP error:\", frame);\r\n};\r\n\r\nclient.onWebSocketClose = () => {\r\n    console.log(\"üî¥ WebSocket disconnected\");\r\n};\r\n\r\nclient.activate();\r\n\r\nexport function sendMove(from, to) {\r\n    if (client.connected) {\r\n        client.publish({\r\n            destination: \"/app/move\",\r\n            body: JSON.stringify({ from, to }),\r\n        });\r\n    } else {\r\n        console.error(\"‚ùå Cannot send move, WebSocket is not connected\");\r\n    }\r\n}\r\n\r\nfunction updateBoard(move) {\r\n    console.log(`‚è≥ Updating board: ${move.from} -> ${move.to}`);\r\n    // Th√™m code c·∫≠p nh·∫≠t giao di·ªán b√†n c·ªù ·ªü ƒë√¢y\r\n}\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAEvC,MAAMC,MAAM,GAAG,IAAID,MAAM,CAAC;EACtBE,SAAS,EAAE,wBAAwB;EAAE;EACrCC,cAAc,EAAE,IAAI;EAAE;EACtBC,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEF,GAAG;AACtD,CAAC,CAAC;AAEFJ,MAAM,CAACO,SAAS,GAAG,MAAM;EACrBF,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;EAEpCN,MAAM,CAACQ,SAAS,CAAC,sBAAsB,EAAGC,OAAO,IAAK;IAClD,IAAI;MACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAACI,IAAI,CAAC;MACrCR,OAAO,CAACC,GAAG,CAAC,qBAAqBI,IAAI,CAACI,IAAI,OAAOJ,IAAI,CAACK,EAAE,EAAE,CAAC;MAC3DC,WAAW,CAACN,IAAI,CAAC;IACrB,CAAC,CAAC,OAAOO,KAAK,EAAE;MACZZ,OAAO,CAACY,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAChD;EACJ,CAAC,CAAC;AACN,CAAC;AAEDjB,MAAM,CAACkB,YAAY,GAAIC,KAAK,IAAK;EAC7Bd,OAAO,CAACY,KAAK,CAAC,gBAAgB,EAAEE,KAAK,CAAC;AAC1C,CAAC;AAEDnB,MAAM,CAACoB,gBAAgB,GAAG,MAAM;EAC5Bf,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;AAC5C,CAAC;AAEDN,MAAM,CAACqB,QAAQ,CAAC,CAAC;AAEjB,OAAO,SAASC,QAAQA,CAACR,IAAI,EAAEC,EAAE,EAAE;EAC/B,IAAIf,MAAM,CAACuB,SAAS,EAAE;IAClBvB,MAAM,CAACwB,OAAO,CAAC;MACXC,WAAW,EAAE,WAAW;MACxBZ,IAAI,EAAEF,IAAI,CAACe,SAAS,CAAC;QAAEZ,IAAI;QAAEC;MAAG,CAAC;IACrC,CAAC,CAAC;EACN,CAAC,MAAM;IACHV,OAAO,CAACY,KAAK,CAAC,gDAAgD,CAAC;EACnE;AACJ;AAEA,SAASD,WAAWA,CAACN,IAAI,EAAE;EACvBL,OAAO,CAACC,GAAG,CAAC,qBAAqBI,IAAI,CAACI,IAAI,OAAOJ,IAAI,CAACK,EAAE,EAAE,CAAC;EAC3D;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}