{"ast":null,"code":"import { Client } from \"@stomp/stompjs\";\nconst SOCKET_URL = \"http://localhost:8080/ws-chess\";\nlet stompClient = null;\nexport const connectWebSocket = onMoveReceived => {\n  stompClient = new Client({\n    brokerURL: SOCKET_URL,\n    onConnect: () => {\n      console.log(\"Connected to WebSocket\");\n      stompClient.subscribe(\"/topic/moves\", message => {\n        const move = JSON.parse(message.body);\n        onMoveReceived(move);\n      });\n    },\n    debug: str => console.log(str)\n  });\n  stompClient.activate();\n};\nexport const sendMove = (from, to) => {\n  if (stompClient && stompClient.connected) {\n    stompClient.publish({\n      destination: \"/app/move\",\n      body: JSON.stringify({\n        from,\n        to\n      })\n    });\n  }\n};","map":{"version":3,"names":["Client","SOCKET_URL","stompClient","connectWebSocket","onMoveReceived","brokerURL","onConnect","console","log","subscribe","message","move","JSON","parse","body","debug","str","activate","sendMove","from","to","connected","publish","destination","stringify"],"sources":["D:/se06206-final-thaydong-nhom1-main/se06206-final-thaydong-nhom1-main/Chess-game-login/src/websocket.js"],"sourcesContent":["import { Client } from \"@stomp/stompjs\";\r\n\r\nconst SOCKET_URL = \"http://localhost:8080/ws-chess\";\r\n\r\nlet stompClient = null;\r\n\r\nexport const connectWebSocket = (onMoveReceived) => {\r\n  stompClient = new Client({\r\n    brokerURL: SOCKET_URL,\r\n    onConnect: () => {\r\n      console.log(\"Connected to WebSocket\");\r\n      stompClient.subscribe(\"/topic/moves\", (message) => {\r\n        const move = JSON.parse(message.body);\r\n        onMoveReceived(move);\r\n      });\r\n    },\r\n    debug: (str) => console.log(str),\r\n  });\r\n\r\n  stompClient.activate();\r\n};\r\n\r\nexport const sendMove = (from, to) => {\r\n  if (stompClient && stompClient.connected) {\r\n    stompClient.publish({\r\n      destination: \"/app/move\",\r\n      body: JSON.stringify({ from, to }),\r\n    });\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAEvC,MAAMC,UAAU,GAAG,gCAAgC;AAEnD,IAAIC,WAAW,GAAG,IAAI;AAEtB,OAAO,MAAMC,gBAAgB,GAAIC,cAAc,IAAK;EAClDF,WAAW,GAAG,IAAIF,MAAM,CAAC;IACvBK,SAAS,EAAEJ,UAAU;IACrBK,SAAS,EAAEA,CAAA,KAAM;MACfC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MACrCN,WAAW,CAACO,SAAS,CAAC,cAAc,EAAGC,OAAO,IAAK;QACjD,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,OAAO,CAACI,IAAI,CAAC;QACrCV,cAAc,CAACO,IAAI,CAAC;MACtB,CAAC,CAAC;IACJ,CAAC;IACDI,KAAK,EAAGC,GAAG,IAAKT,OAAO,CAACC,GAAG,CAACQ,GAAG;EACjC,CAAC,CAAC;EAEFd,WAAW,CAACe,QAAQ,CAAC,CAAC;AACxB,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAGA,CAACC,IAAI,EAAEC,EAAE,KAAK;EACpC,IAAIlB,WAAW,IAAIA,WAAW,CAACmB,SAAS,EAAE;IACxCnB,WAAW,CAACoB,OAAO,CAAC;MAClBC,WAAW,EAAE,WAAW;MACxBT,IAAI,EAAEF,IAAI,CAACY,SAAS,CAAC;QAAEL,IAAI;QAAEC;MAAG,CAAC;IACnC,CAAC,CAAC;EACJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}