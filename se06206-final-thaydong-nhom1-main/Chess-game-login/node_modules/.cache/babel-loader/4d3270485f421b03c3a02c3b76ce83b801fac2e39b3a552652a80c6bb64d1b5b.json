{"ast":null,"code":"import { getValidMoves } from \"./moveRules\"; // Import luáº­t di chuyá»ƒn\n\nconst DEBUG_MODE = true; // Báº­t/táº¯t console log\n\n// ğŸ“ TÃ¬m vá»‹ trÃ­ cá»§a vua trÃªn bÃ n cá»\nexport const findKingPosition = (board, isWhite) => {\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      if (board[row][col] === (isWhite ? \"â™”\" : \"â™š\")) {\n        return {\n          row,\n          col\n        };\n      }\n    }\n  }\n  return null;\n};\n\n// ğŸ“ Kiá»ƒm tra xem vua cÃ³ bá»‹ chiáº¿u khÃ´ng\nexport const isKingInCheck = (board, isWhite) => {\n  const kingPos = findKingPosition(board, isWhite);\n  if (!kingPos) return false;\n  const {\n    row: kingRow,\n    col: kingCol\n  } = kingPos;\n  if (DEBUG_MODE) console.log(`ğŸ” Kiá»ƒm tra chiáº¿u cho vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"} táº¡i (${kingRow}, ${kingCol})`);\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue;\n      const isEnemy = (isWhite ? \"â™™â™–â™˜â™—â™•â™š\" : \"â™Ÿâ™œâ™â™â™›â™”\").includes(piece);\n      if (isEnemy) {\n        const possibleMoves = getValidMoves(piece, row, col, board);\n        if (possibleMoves.some(move => move.row === kingRow && move.col === kingCol)) {\n          if (DEBUG_MODE) console.log(`âš ï¸ Vua Ä‘ang bá»‹ chiáº¿u bá»Ÿi quÃ¢n ${piece} tá»« (${row}, ${col})`);\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n};\n\n// ğŸ“ Kiá»ƒm tra chiáº¿u háº¿t (Checkmate)\nexport const isCheckmate = (board, isWhite) => {\n  if (!isKingInCheck(board, isWhite)) return false;\n  if (DEBUG_MODE) console.log(`ğŸ” Kiá»ƒm tra chiáº¿u háº¿t cho vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"}...`);\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue;\n      const isFriendly = (isWhite ? \"â™™â™–â™˜â™—â™•â™”\" : \"â™Ÿâ™œâ™â™â™›â™š\").includes(piece);\n      if (!isFriendly) continue;\n      const possibleMoves = getValidMoves(piece, row, col, board);\n      for (const move of possibleMoves) {\n        const newRow = move.row;\n        const newCol = move.col;\n\n        // Deep copy bÃ n cá»\n        const newBoard = JSON.parse(JSON.stringify(board));\n        newBoard[newRow][newCol] = piece;\n        newBoard[row][col] = \"\";\n        if (!isKingInCheck(newBoard, isWhite)) {\n          if (DEBUG_MODE) console.log(`âœ… TÃ¬m tháº¥y má»™t nÆ°á»›c thoÃ¡t táº¡i (${row}, ${col}) â†’ (${newRow}, ${newCol})`);\n          return false;\n        }\n      }\n    }\n  }\n  if (DEBUG_MODE) console.log(`ğŸ† Chiáº¿u háº¿t! KhÃ´ng cÃ²n nÆ°á»›c nÃ o há»£p lá»‡.`);\n  return true;\n};","map":{"version":3,"names":["getValidMoves","DEBUG_MODE","findKingPosition","board","isWhite","row","col","isKingInCheck","kingPos","kingRow","kingCol","console","log","piece","isEnemy","includes","possibleMoves","some","move","isCheckmate","isFriendly","newRow","newCol","newBoard","JSON","parse","stringify"],"sources":["/root/se06206-final-thaydong-nhom1/se06206-final-thaydong-nhom1-main/Chess-game-login/src/utils/checkmate.js"],"sourcesContent":["import { getValidMoves } from \"./moveRules\"; // Import luáº­t di chuyá»ƒn\n\nconst DEBUG_MODE = true; // Báº­t/táº¯t console log\n\n// ğŸ“ TÃ¬m vá»‹ trÃ­ cá»§a vua trÃªn bÃ n cá»\nexport const findKingPosition = (board, isWhite) => {\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      if (board[row][col] === (isWhite ? \"â™”\" : \"â™š\")) {\n        return { row, col };\n      }\n    }\n  }\n  return null;\n};\n\n// ğŸ“ Kiá»ƒm tra xem vua cÃ³ bá»‹ chiáº¿u khÃ´ng\nexport const isKingInCheck = (board, isWhite) => {\n  const kingPos = findKingPosition(board, isWhite);\n  if (!kingPos) return false;\n\n  const { row: kingRow, col: kingCol } = kingPos;\n  if (DEBUG_MODE) console.log(`ğŸ” Kiá»ƒm tra chiáº¿u cho vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"} táº¡i (${kingRow}, ${kingCol})`);\n\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue;\n\n      const isEnemy = (isWhite ? \"â™™â™–â™˜â™—â™•â™š\" : \"â™Ÿâ™œâ™â™â™›â™”\").includes(piece);\n      if (isEnemy) {\n        const possibleMoves = getValidMoves(piece, row, col, board);\n        if (possibleMoves.some(move => move.row === kingRow && move.col === kingCol)) {\n          if (DEBUG_MODE) console.log(`âš ï¸ Vua Ä‘ang bá»‹ chiáº¿u bá»Ÿi quÃ¢n ${piece} tá»« (${row}, ${col})`);\n          return true;\n        }\n      }\n    }\n  }\n\n  return false;\n};\n\n// ğŸ“ Kiá»ƒm tra chiáº¿u háº¿t (Checkmate)\nexport const isCheckmate = (board, isWhite) => {\n  if (!isKingInCheck(board, isWhite)) return false;\n  if (DEBUG_MODE) console.log(`ğŸ” Kiá»ƒm tra chiáº¿u háº¿t cho vua ${isWhite ? \"tráº¯ng\" : \"Ä‘en\"}...`);\n\n  for (let row = 0; row < 8; row++) {\n    for (let col = 0; col < 8; col++) {\n      const piece = board[row][col];\n      if (!piece) continue;\n\n      const isFriendly = (isWhite ? \"â™™â™–â™˜â™—â™•â™”\" : \"â™Ÿâ™œâ™â™â™›â™š\").includes(piece);\n      if (!isFriendly) continue;\n\n      const possibleMoves = getValidMoves(piece, row, col, board);\n      for (const move of possibleMoves) {\n        const newRow = move.row;\n        const newCol = move.col;\n\n        // Deep copy bÃ n cá»\n        const newBoard = JSON.parse(JSON.stringify(board));\n        newBoard[newRow][newCol] = piece;\n        newBoard[row][col] = \"\";\n\n        if (!isKingInCheck(newBoard, isWhite)) {\n          if (DEBUG_MODE) console.log(`âœ… TÃ¬m tháº¥y má»™t nÆ°á»›c thoÃ¡t táº¡i (${row}, ${col}) â†’ (${newRow}, ${newCol})`);\n          return false;\n        }\n      }\n    }\n  }\n\n  if (DEBUG_MODE) console.log(`ğŸ† Chiáº¿u háº¿t! KhÃ´ng cÃ²n nÆ°á»›c nÃ o há»£p lá»‡.`);\n  return true;\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}